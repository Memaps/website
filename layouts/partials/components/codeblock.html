{{ $filename := .filename | default "" -}}
{{ $lang := .lang | default "" }}
{{ $content := .content }}
{{ $options := .options | default (dict) }}

{{- if $filename -}}
  <div class="filename" dir="auto">{{ $filename }}</div>
{{- end -}}
{{- if transform.CanHighlight $lang -}}
  <div dir="ltr">{{- highlight $content $lang $options -}}</div>
{{- else -}}
  <pre dir="ltr"><code>{{ $content }}</code></pre>
{{- end -}}